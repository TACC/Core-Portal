<dd-breadcrumb
  listing="browser.listing"
  skip-root="true"
  custom-root="data.customRoot"
  on-browse="onBrowse"
  project="data.project"
  item-href="resolveBreadcrumbHref">
</dd-breadcrumb>

<div class="alert alert-info" ng-show="browser.busyListing || browser.busy">
  <p class="text-center">
      <i class="fa fa-spinner fa-spin"></i> Loading...
  </p>
</div>
<div class="alert"
     data-ng-class="browser.ui.message.class"
     data-ng-show="browser.ui.message.show">
  <p class="text-center">
    {{browser.ui.message.content}}
  </p>
</div>
<div class="alert alert-danger" data-ng-show="browser.error.message">
  {{browser.error.message}}
</div>
<div class="push-keys-message" data-ng-if="browser.error.status == 502">
  <p>
    There seems to be a problem with your storage system. <br/>
    You might be able to fix this problem by
    <button type="button"
            class="btn btn-link"
            data-ng-click="openPushPublicKeyForm()">
      <span data-ng-if="!browser.ui.pushKeyModalOpening">
        pushing the public key to the storage system
      </span>
      <span data-ng-if="browser.ui.pushKeyModalOpening">
        <i class="fa fa-spinner fa-spin">&nbsp;</i>Loading ...
      </span>
    </button>. <br/>
    If the problem persis please submit a ticket and we will take care
    of it as soon as possible.
  </p>
</div>
<div class="table-responsive dd-listing-wrapper"> <!-- START FILE LISTING TABLE WRAPPER -->
  <table class="table table-bordered table-striped"><!-- START FILE LISTING TABLE -->
    <thead>
      <tr>
        <th>Name</th>
        <th>Size</th>
        <th>Last Modified</th>
        <th>Permissions</th>
      </tr>
    </thead>
    <tbody>
      <tr data-ng-if="!browser.busyListing"
          data-ng-repeat="file in listingToShow()"
          data-ng-click="onSelect($event, file)"
          data-ng-class="{'dd-file-selected':  file._ui.selected}">
          <td>
            <i class="fa {{ file.icon() }} fa-fw"></i>
            <!-- <a data-ng-href="{{ file._links._self.href }}"
               data-ng-click="onBrowse($event, file)">
               {{ file.name }}
            </a> -->
            <a data-ng-click="onBrowse($event, file)">
               {{ file.name }}
            </a>

          </td>
          <td>{{ file.length|bytes }}</td>
          <td>{{ file.lastModified|date:"short" }}</td>
          <td> {{ file.permissions | agaveperms}}
      </tr>
      <caption>
      </caption>
    </tbody>
  </table> <!-- ENDS FILE LISTING TABLE -->
  </div>
  <div class="row" ng-if="!browser.busyListing && browser.listing.children.length > state.limit">
    <div class="col-md-3">
        <button class="btn btn-default pull-left"
          ng-click="prevPage()"
          ng-disabled="state.page_num === 0">
          <i class="fa fa-chevron-left"></i> Prev
        </button>
      </div>
      <div class="col-md-6">
        <div class="text-center">
          <span class="badge"> {{state.page_num + 1}} / {{ state.max_pages }} </span>
        </div>
      </div>
      <div class="col-md-3">
        <button class="btn btn-default pull-right"
          ng-click="nextPage()"
          ng-disabled="state.page_num + 1 === state.max_pages">
          <i class="fa fa-chevron-right"></i> More
        </button>
      </div>
</div> <!-- END FILE LISTING TABLE WRAPPER -->
