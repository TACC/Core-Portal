<div class="modal-header">
    <h3 class="modal-title">{{$ctrl.job.name}}</h3>
</div>
<div class="modal-body job-details-modal">
    <div ng-if="$ctrl.loading">
        <i class="fa fa-spinner fa-spin"></i>&nbsp;Loading...
    </div>
    <dl ng-if="!$ctrl.loading" class="job-info">
        <dt>Job ID</dt>
        <dd>{{ $ctrl.job.id }}</dd>
        <dt>Application</dt>
        <dd>{{ $ctrl.job.appId }}</dd>
        <dt>Status (<a ui-sref="wb.jobs.job({ jobId: $ctrl.job.id })">View Job Details</a>)</dt>
        <dd class="job-status">
            <div>
                Submitted<br />
                <span class="timestamp">{{ $ctrl.convertDate($ctrl.job.created) }}</span>
            </div>
            <div>
                <span ng-class="$ctrl.Jobs.getStatusClass($ctrl.job)">
                    <b>&nbsp;{{ $ctrl.job.status }}&nbsp;</b>
                </span><br />
                <span class="timestamp">{{ $ctrl.convertDate($ctrl.job.ended) }}</span>
            </div>
        </dd>
        <dt></dt>
        <dd>
            <div ng-if="$ctrl.job.lastStatusMessage"
                ng-class="$ctrl.Jobs.getStatusClass($ctrl.job)">
                <span class="status-toggle" ng-click="$ctrl.statusToggle()">
                    Status Report
                    <i ng-if="!$ctrl.expandStatus" class="fa fa-chevron-circle-down"></i>
                    <i ng-if="$ctrl.expandStatus" class="fa fa-chevron-circle-up"></i>
                </span>
            </div>
            <div ng-if="$ctrl.expandStatus" class="status-message">
                <p>{{$ctrl.job.lastStatusMessage}}</p>
            </div>
        </dd>
        <dt>Output</dt>
        <dd ng-if="!$ctrl.jobFinished"><i>Output pending</i></dd>
        <dd><a href="{{ $ctrl.job.archiveUrl }}">View in Data Depot</a></dd>
        <dd><a href="{{ $ctrl.job.jupyterUrl }}" ng-if="$ctrl.job.jupyterUrl" target=_blank>View in JupyterHub</a></dd>
        <br />
        <job-actions job="$ctrl.job" dismiss="$ctrl.close()"></job-actions>
    </dl>
</div>
<div class="modal-footer">
    <button class="btn btn-default" type="button" ng-click="$ctrl.close()">Close</button>
</div>
